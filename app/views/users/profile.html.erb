<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>My Website</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0">
  </head>
  <body>
<div class="container d-flex flex-column card-main-profile">
  <div class="d-flex flex-row" style="justify-content: end;">
    <%= link_to edit_user_registration_path(current_user) do %>
      <div class="card" style="justify-content: center; align-items: center;  height: 40px; width: 40px;">
        <span class="material-symbols-outlined no-underline" style="font-size: 32px; color: black;">
          edit
        </span>
      </div>
    <% end %>
  </div>
  <div class="d-flex align-items-center">
    <% if current_user.photo.blank? %>
      <%= image_tag "https://w7.pngwing.com/pngs/527/663/png-transparent-logo-person-user-person-icon-rectangle-photography-computer-wallpaper.png", height: 200, width: 200, crop: :fill, radius: "max" %>
    <% else %>
      <%= cl_image_tag current_user.photo.key, height: 200, width: 200, crop: :fill, radius: "max" %>
    <% end %>
    <h2 style="text-align: center; margin-left: 30px; margin-right 30px; "><%= "#{current_user.first_name}'s Profile" %></h2>
  </div>

  <div class="card" style="overflow: unset; height: fit-content; position: relative; top: 20px;">
    <div class="container d-flex flex-column card-body" style="background-color: #FFFEFE; padding: 75px;">
      <h4 class="card-title mb-5" ">Average rating </h4>
      <h4 class="card-title" ">Bio</h4>
      <% if current_user.bio.present? %>
        <p class="card-text mb-5" style="padding: 5px;"><%= current_user.bio %></p>
      <% else %>
        <p class="card-text mb-5" style="padding: 5px;">No bio added yet.</p>
      <% end %>

      <div class="row">
        <h4 class="card-title mb-3" ">Reviews</h4>
        <ul class="list-group">
          <% current_user.reviews.each do |review| %>
            <li class="list-group-item"><%= review.content %>
              <%= link_to "Delete",
                review_path(review),
                data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}
              %>
            </li>
          <% end %>

        </ul>
      </div>
    </div>
  </div>
</div>


  <div class="row">
    <p><strong>Received reviews:</strong></p>
    <ul class="list-group">
      <% @user.received_reviews.each do |review| %>
        <li class="list-group-item"><%= review.content %> <%= review.user.first_name %>
        <% link_to "Delete",
        review_path(review),
        data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}
      %>
    </li>
  <% end %>
</div>
  <p><strong>Sendet reviews:</strong></p>
  <ul class="list-group">
    <% @user.reviews.each do |review| %>
        <li class="list-group-item"><%= review.content %> <%= review.user.first_name %>
        <%= link_to "Delete",
        review_path(review),
        data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}
      %>
    </li>
  <% end %>
  </ul>
    </ul>
</div>
<ul>
  <p><strong>Old Buddies</strong></p>
<%@buddies.each do |buddie| %>
<nav class="menu-bar">
  <div class="group">
    <%if buddie.sender == @user%>
      <%= buddie.receiver.first_name%>
      <%=buddie.trip.destination.name%>
    <% else %>
      <%=buddie.sender.first_name%>
      <%=buddie.trip.destination.name%>
    <% end %>
    <p><%= link_to "add review", new_user_review_path(@user, receiver_id: buddie.sender.id == @user.id ? buddie.receiver.id : buddie.sender.id) %></p>
  </div>
<% end %>

</ul>
  </div>
  <div class="group">
  </div>
</nav>
